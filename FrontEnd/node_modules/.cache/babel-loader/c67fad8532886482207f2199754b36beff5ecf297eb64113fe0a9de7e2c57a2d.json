{"ast":null,"code":"export const authUtils = {\n  getToken: () => {\n    return localStorage.getItem('token');\n  },\n  setToken: token => {\n    localStorage.setItem('token', token);\n  },\n  removeToken: () => {\n    localStorage.removeItem('token');\n  },\n  getUserId: () => {\n    return localStorage.getItem('userId');\n  },\n  setUserId: userId => {\n    localStorage.setItem('userId', userId);\n  },\n  getUsername: () => {\n    return localStorage.getItem('username');\n  },\n  setUsername: username => {\n    localStorage.setItem('username', username);\n  },\n  getUserRole: () => {\n    return localStorage.getItem('userRole');\n  },\n  setUserRole: role => {\n    localStorage.setItem('userRole', role);\n  },\n  getLastEmail: () => {\n    return localStorage.getItem('lastEmail');\n  },\n  setLastEmail: email => {\n    localStorage.setItem('lastEmail', email);\n  },\n  getPreviousAccounts: () => {\n    const accounts = localStorage.getItem('prevAccounts');\n    return accounts ? JSON.parse(accounts) : [];\n  },\n  setPreviousAccounts: accounts => {\n    localStorage.setItem('prevAccounts', JSON.stringify(accounts));\n  },\n  getProfileImageUrl: () => {\n    return localStorage.getItem('profileImageUrl');\n  },\n  setProfileImageUrl: url => {\n    localStorage.setItem('profileImageUrl', url);\n  },\n  clearAll: () => {\n    localStorage.clear();\n  },\n  isAuthenticated: () => {\n    return !!authUtils.getToken();\n  }\n};\n\n/**\r\n * Normaliza un rol a formato estÃ¡ndar\r\n * Maneja mÃºltiples formatos de la BD: \"%Admin%\", \"admin\", \"!Entrenador!\", \"entrenador\", \"Usuario\"\r\n * @param role Rol original (puede ser null o undefined)\r\n * @returns Rol normalizado: \"admin\" | \"entrenador\" | \"usuario\"\r\n */\nexport const normalizeRole = role => {\n  if (!role) return 'usuario';\n  const normalized = role.toLowerCase().trim().replace(/[%!]/g, '');\n  if (normalized.includes('admin')) return 'admin';\n  if (normalized.includes('entrenador')) return 'entrenador';\n  return 'usuario';\n};\n\n/**\r\n * Obtiene el rol normalizado del usuario\r\n * @returns Rol normalizado: \"admin\" | \"entrenador\" | \"usuario\"\r\n */\nexport const getNormalizedUserRole = () => {\n  const role = authUtils.getUserRole();\n  return normalizeRole(role);\n};\n\n/**\r\n * Verifica si el usuario es admin\r\n * @returns true si el rol es admin\r\n */\nexport const isAdmin = () => {\n  return getNormalizedUserRole() === 'admin';\n};\n\n/**\r\n * Verifica si el usuario es entrenador\r\n * @returns true si el rol es entrenador o admin\r\n */\nexport const isTrainer = () => {\n  const role = getNormalizedUserRole();\n  return role === 'entrenador' || role === 'admin';\n};\n\n/**\r\n * Obtiene display text del rol con emoji\r\n * @param role Rol original\r\n * @returns String formateado con emoji: \"ðŸ‘‘ Admin\", \"ðŸ’ª Entrenador\", \"Usuario\"\r\n */\nexport const getRoleDisplayText = role => {\n  const normalized = normalizeRole(role);\n  switch (normalized) {\n    case 'admin':\n      return 'ðŸ‘‘ Admin';\n    case 'entrenador':\n      return 'ðŸ’ª Entrenador';\n    default:\n      return 'Usuario';\n  }\n};\n\n/**\r\n * Obtiene el color del rol para la UI\r\n * @param role Rol original\r\n * @returns Color en formato hex\r\n */\nexport const getRoleColor = role => {\n  const normalized = normalizeRole(role);\n  switch (normalized) {\n    case 'admin':\n      return '#FFD700';\n    // Oro para admin\n    case 'entrenador':\n      return '#667eea';\n    // Azul para entrenador\n    default:\n      return '#666';\n    // Gris para usuario\n  }\n};","map":{"version":3,"names":["authUtils","getToken","localStorage","getItem","setToken","token","setItem","removeToken","removeItem","getUserId","setUserId","userId","getUsername","setUsername","username","getUserRole","setUserRole","role","getLastEmail","setLastEmail","email","getPreviousAccounts","accounts","JSON","parse","setPreviousAccounts","stringify","getProfileImageUrl","setProfileImageUrl","url","clearAll","clear","isAuthenticated","normalizeRole","normalized","toLowerCase","trim","replace","includes","getNormalizedUserRole","isAdmin","isTrainer","getRoleDisplayText","getRoleColor"],"sources":["C:/Users/Chiavetta/Desktop/programacion-3-2025-chiavetta-Ramires102/FrontEnd/src/utils/auth.ts"],"sourcesContent":["export const authUtils = {\r\n  getToken: (): string | null => {\r\n    return localStorage.getItem('token');\r\n  },\r\n\r\n  setToken: (token: string): void => {\r\n    localStorage.setItem('token', token);\r\n  },\r\n\r\n  removeToken: (): void => {\r\n    localStorage.removeItem('token');\r\n  },\r\n\r\n  getUserId: (): string | null => {\r\n    return localStorage.getItem('userId');\r\n  },\r\n\r\n  setUserId: (userId: string): void => {\r\n    localStorage.setItem('userId', userId);\r\n  },\r\n\r\n  getUsername: (): string | null => {\r\n    return localStorage.getItem('username');\r\n  },\r\n\r\n  setUsername: (username: string): void => {\r\n    localStorage.setItem('username', username);\r\n  },\r\n\r\n  getUserRole: (): string | null => {\r\n    return localStorage.getItem('userRole');\r\n  },\r\n\r\n  setUserRole: (role: string): void => {\r\n    localStorage.setItem('userRole', role);\r\n  },\r\n\r\n  getLastEmail: (): string | null => {\r\n    return localStorage.getItem('lastEmail');\r\n  },\r\n\r\n  setLastEmail: (email: string): void => {\r\n    localStorage.setItem('lastEmail', email);\r\n  },\r\n\r\n  getPreviousAccounts: (): string[] => {\r\n    const accounts = localStorage.getItem('prevAccounts');\r\n    return accounts ? JSON.parse(accounts) : [];\r\n  },\r\n\r\n  setPreviousAccounts: (accounts: string[]): void => {\r\n    localStorage.setItem('prevAccounts', JSON.stringify(accounts));\r\n  },\r\n\r\n  getProfileImageUrl: (): string | null => {\r\n    return localStorage.getItem('profileImageUrl');\r\n  },\r\n\r\n  setProfileImageUrl: (url: string): void => {\r\n    localStorage.setItem('profileImageUrl', url);\r\n  },\r\n\r\n  clearAll: (): void => {\r\n    localStorage.clear();\r\n  },\r\n\r\n  isAuthenticated: (): boolean => {\r\n    return !!authUtils.getToken();\r\n  },\r\n};\r\n\r\n/**\r\n * Normaliza un rol a formato estÃ¡ndar\r\n * Maneja mÃºltiples formatos de la BD: \"%Admin%\", \"admin\", \"!Entrenador!\", \"entrenador\", \"Usuario\"\r\n * @param role Rol original (puede ser null o undefined)\r\n * @returns Rol normalizado: \"admin\" | \"entrenador\" | \"usuario\"\r\n */\r\nexport const normalizeRole = (role: string | null | undefined): 'admin' | 'entrenador' | 'usuario' => {\r\n  if (!role) return 'usuario';\r\n  \r\n  const normalized = role.toLowerCase().trim().replace(/[%!]/g, '');\r\n  \r\n  if (normalized.includes('admin')) return 'admin';\r\n  if (normalized.includes('entrenador')) return 'entrenador';\r\n  \r\n  return 'usuario';\r\n};\r\n\r\n/**\r\n * Obtiene el rol normalizado del usuario\r\n * @returns Rol normalizado: \"admin\" | \"entrenador\" | \"usuario\"\r\n */\r\nexport const getNormalizedUserRole = (): 'admin' | 'entrenador' | 'usuario' => {\r\n  const role = authUtils.getUserRole();\r\n  return normalizeRole(role);\r\n};\r\n\r\n/**\r\n * Verifica si el usuario es admin\r\n * @returns true si el rol es admin\r\n */\r\nexport const isAdmin = (): boolean => {\r\n  return getNormalizedUserRole() === 'admin';\r\n};\r\n\r\n/**\r\n * Verifica si el usuario es entrenador\r\n * @returns true si el rol es entrenador o admin\r\n */\r\nexport const isTrainer = (): boolean => {\r\n  const role = getNormalizedUserRole();\r\n  return role === 'entrenador' || role === 'admin';\r\n};\r\n\r\n/**\r\n * Obtiene display text del rol con emoji\r\n * @param role Rol original\r\n * @returns String formateado con emoji: \"ðŸ‘‘ Admin\", \"ðŸ’ª Entrenador\", \"Usuario\"\r\n */\r\nexport const getRoleDisplayText = (role: string | null | undefined): string => {\r\n  const normalized = normalizeRole(role);\r\n  \r\n  switch (normalized) {\r\n    case 'admin':\r\n      return 'ðŸ‘‘ Admin';\r\n    case 'entrenador':\r\n      return 'ðŸ’ª Entrenador';\r\n    default:\r\n      return 'Usuario';\r\n  }\r\n};\r\n\r\n/**\r\n * Obtiene el color del rol para la UI\r\n * @param role Rol original\r\n * @returns Color en formato hex\r\n */\r\nexport const getRoleColor = (role: string | null | undefined): string => {\r\n  const normalized = normalizeRole(role);\r\n  \r\n  switch (normalized) {\r\n    case 'admin':\r\n      return '#FFD700';  // Oro para admin\r\n    case 'entrenador':\r\n      return '#667eea';  // Azul para entrenador\r\n    default:\r\n      return '#666';     // Gris para usuario\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}